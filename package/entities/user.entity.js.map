{"version":3,"sources":["../src/entities/user.entity.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,iCAAiC;AACjC,qCASiB;AAEjB,+DAAqD;AACrD,+CAAqC;AACrC,yDAA8C;AAG9C,IAAa,IAAI,GAAjB,MAAa,IAAI;CAyEhB,CAAA;AAvEG;IADC,gCAAsB,EAAE;;gCACd;AAMX;IAJC,gBAAM,CAAC;QACJ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;KACf,CAAC;;sCACe;AAMjB;IAJC,gBAAM,CAAC;QACJ,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,IAAI;KACjB,CAAC;;mCACY;AAMd;IAJC,gBAAM,CAAC;QACJ,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,IAAI;KACjB,CAAC;;oCACa;AAGf;IADC,gBAAM,EAAE;;sCACQ;AAGjB;IADC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,2BAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC;;uCACjC;AAKtB;IAHC,gBAAM,CAAC;QACJ,OAAO,EAAE,KAAK;KACjB,CAAC;;oCACc;AAKhB;IAHC,gBAAM,CAAC;QACJ,OAAO,EAAE,KAAK;KACjB,CAAC;;qCACe;AAMjB;IAJC,oBAAU,CAAC,IAAI,CAAC,EAAE,CAAC,kBAAI,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE;QAC1C,QAAQ,EAAE,SAAS;KACtB,CAAC;IACD,mBAAS,EAAE;;mCACE;AAMd;IAJC,oBAAU,CAAC,IAAI,CAAC,EAAE,CAAC,kCAAY,EAAE,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,KAAK,EAAE;QAClE,QAAQ,EAAE,SAAS;KACtB,CAAC;IACD,mBAAS,EAAE;;2CACkB;AAY9B;IAVC,0BAAgB,CAAC;QACd,WAAW,EAAE;YACT,IAAI,EAAE,CAAC,IAAU,EAAE,EAAE;gBACjB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACtD,CAAC;YACD,EAAE,EAAE,GAAG,EAAE;gBACL,OAAO,IAAI,IAAI,EAAE,CAAC;YACtB,CAAC;SACJ;KACJ,CAAC;;wCACiB;AAYnB;IAVC,0BAAgB,CAAC;QACd,WAAW,EAAE;YACT,IAAI,EAAE,CAAC,IAAU,EAAE,EAAE;gBACjB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;YACtD,CAAC;YACD,EAAE,EAAE,GAAG,EAAE;gBACL,OAAO,IAAI,IAAI,EAAE,CAAC;YACtB,CAAC;SACJ;KACJ,CAAC;;wCACiB;AAxEV,IAAI;IADhB,gBAAM,CAAC,MAAM,CAAC;GACF,IAAI,CAyEhB;AAzEY,oBAAI","file":"user.entity.js","sourcesContent":["import * as moment from 'moment';\nimport {\n    Column,\n    CreateDateColumn,\n    Entity,\n    JoinTable,\n    ManyToMany,\n    OneToMany,\n    PrimaryGeneratedColumn,\n    UpdateDateColumn,\n} from 'typeorm';\n\nimport { Organization } from './organization.entity';\nimport { Role } from './role.entity';\nimport { UserInfo } from './user-info.entity';\n\n@Entity('user')\nexport class User {\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    @Column({\n        nullable: true,\n        unique: true\n    })\n    username: string;\n\n    @Column({\n        unique: true,\n        nullable: true\n    })\n    email: string;\n\n    @Column({\n        unique: true,\n        nullable: true\n    })\n    mobile: string;\n\n    @Column()\n    password: string;\n\n    @OneToMany(type => UserInfo, userInfo => userInfo.user)\n    userInfos: UserInfo[];\n\n    @Column({\n        default: false\n    })\n    banned: boolean;\n\n    @Column({\n        default: false\n    })\n    recycle: boolean;\n\n    @ManyToMany(type => Role, role => role.users, {\n        onDelete: 'CASCADE'\n    })\n    @JoinTable()\n    roles: Role[];\n\n    @ManyToMany(type => Organization, organization => organization.users, {\n        onDelete: 'CASCADE'\n    })\n    @JoinTable()\n    organizations: Organization[];\n\n    @CreateDateColumn({\n        transformer: {\n            from: (date: Date) => {\n                return moment(date).format('YYYY-MM-DD HH:mm:ss');\n            },\n            to: () => {\n                return new Date();\n            }\n        }\n    })\n    createTime: string;\n\n    @UpdateDateColumn({\n        transformer: {\n            from: (date: Date) => {\n                return moment(date).format('YYYY-MM-DD HH:mm:ss');\n            },\n            to: () => {\n                return new Date();\n            }\n        }\n    })\n    updateTime: string;\n}"]}