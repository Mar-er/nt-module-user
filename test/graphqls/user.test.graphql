# 用户注册
mutation register($username: String!, $password: String!){
	register(username: $username, password: $password) {
		code
		message
	}
}
{
	"username": "dzy",
	"password": "123qwe"
}

# 用户登录
query login($username: String!, $password: String!) {
	login(username: $username, password: $password) {
		code
		message
		data {
			accessToken
			expiresIn
		}
	}
}
{
	"username": "dzy",
	"password": "123qwe"
}

# 创建用户
mutation createUser($createUserInput: CreateUserInput) {
	createUser(createUserInput: $createUserInput) {
		code
		message
	}
}
{
	"createUserInput": {
		"username": "dzy",
		"password": "123qwe",
		"infoKVs": [
			{
				"key": 1,
				"value": "段泽尧"
			},
			{
				"key": 2,
				"value": "男"
			},
			{
				"key": 3,
				"value": "23"
			}
		],
		"roleIds": [
			1
		],
		"organizationIds": [
			2
		]
	}
}

# 给用户添加角色
mutation addUserRole($userId: Int!, $roleId: Int!) {
	addUserRole(userId: $userId, roleId: $roleId) {
		code
		message
	}
}
{
	"userId": 1,
	"roleId": 1
}

# 给用户添加组织
mutation addUserOrganization($userId: Int!, $organizationId: Int!) {
	addUserOrganization(userId: $userId, organizationId: $organizationId) {
		code
		message
	}
}
{
	"userId": 1,
	"organizationId": 2
}

# 更新用户信息
mutation {
  updateUserInfo(userId: 1, updateUserInput: {
    email: "666666@qq.com",
    mobile: "18166666666",
    infoKVs: [
      {
        key: 1,
        value: "小猪佩奇"
      },
      {
        key: 3,
        value: "3"
      }
    ]
  }) {
    code
    message
  }
}

# 查询当前登录的用户信息
query findCurrentUserInfo {
  findCurrentUserInfo {
    code
    message
    data {
      userId
      username
      email
      mobile
      banned
      recycle
      userRoles {
        id
        name
      }
      userOrganizations {
        id
        name
      }
      userInfos {
        id
        name
        type
        value
        description
      }
    }
  }
}

# 获取指定组织ID下的用户
query findUsersInOrganization($organizationId: Int!) {
  findUsersInOrganization(organizationId: $organizationId) {
    code
    message
    data {
      userId
      username
      email
      mobile
      banned
      recycle
      userRoles {
        id
        name
      }
      userOrganizations {
        id
        name
      }
      userInfos {
        id
        name
        type
        value
        description
      }
    }
  }
}
{
  "organizationId": 1
}