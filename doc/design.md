# 用户模块设计文档

用户模块现阶段只提供最基础的基于RBAC的权限控制方案，其中表结构尽可能的抽象化，不提供详细的字段，如用户信息等字段，由上层的业务系统进行扩展。

用户角色、权限的默认数据由上层业务系统进行配置，用户模块需提供接口用于数据的初始化。

## 功能

- [ ] 注册
- [ ] 登录授权
- [ ] 鉴权
- [ ] ......

登录授权时，可将计算好的权限值加密到 access_token 中，在调用接口时，通过对 access_token 的解密，获取权限值，将权限值与请求方法进行比对，从而达到鉴权的效果。

鉴权时，使用中间件将 access_token 中的权限赋值到 request 对象中，在方法调用前，使用守卫对权限和方法上的注解进行比对，一致时允许调用，否则返回403。

在调用安全系数较高的方法时，可使用二次验证的机制确保请求中的 access_token 权限值不被篡改，二次验证机制可在权限下级的功能操作表中设置是否开启二次验证字段。